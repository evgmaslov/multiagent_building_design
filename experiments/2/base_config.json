{
    "model_configs":[
        {"name":"mistralai/Mixtral-8x7B-Instruct-v0.1",
        "type":"AutoModelForCausalLM"},
        {"name":"mistralai/Codestral-22B-v0.1",
        "type":"AutoModelForCausalLM"}
    ],
    "module_configs":[
        {
            "type":"AgentModule",
            "agent_config":{
                "type":"HuggingfaceLLMAgent",
                "model_name":"mistralai/Mixtral-8x7B-Instruct-v0.1",
                "system_prompt_func_config":{
                    "type":"SystemPrompt",
                    "instructions_group":"designer",
                    "instructions_keys":["role", 
                    "you_create_plan_walls_doors", 
                    "you_create_rooms_connections", 
                    "use_requirements", 
                    "write_actions",
                    "justify",
                    "create_rooms",
                    {
                        "key":"text_few_shots",
                        "template_key":"designer",
                        "template_ind":0,
                        "few_shots_key":"base",
                        "few_shots_inds":[7, 9, 11],
                        "instr_key":"examples"
                    }],
                    "linebreak_after":[2, 3, 5, 6]
                },
                "user_input_func_config":{
                    "type":"UserPrompt",
                    "template_key":"base",
                    "template_ind":0
                },
                "t":0.9,
                "max_length":128000
            },
            "input_paths":{
                "system":{},
                "user":{
                    "user_input":["input"]
                }
            },
            "output_path":["actions"]
        },
        {
            "type":"IterativeModule",
            "splitting_input_path":["actions"],
            "splitting_func_config":
            {
                "type":"InstructionsExtractor"
            },
            "splitted_buffer_path":["action_buffer"],
            "output_path":["code"],
            "result_buffer_path":["code_buffer"],
            "result_base_value":"public Flat DesignFlat()\n{\n    Flat flat = new Flat(new List<Room> { });\n    return flat;\n}",
            "base_module_config":
            {
                "type":"AgentModule",
                "agent_config":{
                    "type":"HuggingfaceLLMAgent",
                    "model_name":"mistralai/Codestral-22B-v0.1",
                    "system_prompt_func_config":{
                        "type":"SystemPrompt",
                        "instructions_group":"step_cad_engineer",
                        "instructions_keys":["role", 
                        "you_create_drawings", 
                        "receive_code_state",
                        "receive_instruction",
                        "modify_code", 
                        "add_corridor",
                        "fix_rooms_positions",
                        {
                            "key":"text_few_shots",
                            "template_key":"step_cad",
                            "template_ind":0,
                            "few_shots_key":"step",
                            "few_shots_inds":[9, 10, 11, 12, 13, 14, 15, 16],
                            "instr_key":"examples"
                        }],
                        "linebreak_after":[1, 4, 6]
                    },
                    "user_input_func_config":{
                        "type":"UserPrompt",
                        "template_key":"step_cad",
                        "template_ind":0
                    },
                    "t":0.2,
                    "max_length":128000
                },
                "input_paths":{
                    "system":{},
                    "user":{
                        "code_state":["code_buffer"],
                        "instruction":["action_buffer"]
                    }
                },
                "output_path":["code_buffer"],
                "output_processor_config":{
                    "type":"CodeExtractor",
                    "language":"csharp"
                }
            }
        }
    ]
}